"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{7170:function(n,e,t){t.r(e),t.d(e,{default:function(){return D}});var r=t(7568),i=t(253),a=t(7582),o=t(5893),s=t(1355),u=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return t.map((function(e){return{multiplier:n,image:e}}))},l=[u(7,"/games/slots/unicorn.png"),u(5,"/games/slots/5x.png"),u(3,"/games/slots/3x.png"),u(2,"/games/slots/2x.png"),u(1,"/games/slots/emoji-cool.png","/games/slots/emoji-hearts.png"),u(.5,"/games/slots/wojak.png")].flat(),c=t(9815),f=function(n){return n.at(Math.floor(Math.random()*n.length))},d=t(4924),p=t(6042),m=t(9396),g=t(7294),v=t(7297),h=t(964);function x(){var n=(0,v.Z)(["\n  display: flex;\n  gap: 5px;\n\n  & > div {\n    position: relative;\n    width: 50px;\n    aspect-ratio: 1/1.5;\n    border-radius: 5px;\n    border: 1px solid #2d2d57;\n  }\n\n  & > div.hidden {\n    opacity: 0.5;\n  }\n\n  & > div > .icon {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  & > div > .multiplier {\n    position: absolute;\n    right: 0;\n    top: 0;\n    transform: translate(50%, -50%);\n    color: black;\n    background: #ffec63;\n    z-index: 10;\n    padding: 0 2px;\n    border-radius: 2px;\n    z-index: 1;\n  }\n"]);return x=function(){return n},n}var y=h.ZP.div(x()),b=Object.entries(l.reduce((function(n,e){var t,r=null!==(t=n[e.multiplier])&&void 0!==t?t:[];return(0,m.Z)((0,p.Z)({},n),(0,d.Z)({},e.multiplier,(0,c.Z)(r).concat([e])))}),{})).map((function(n){var e=(0,i.Z)(n,2),t=e[0],r=e[1];return{multiplier:Number(t),items:r}})).sort((function(n,e){return n.multiplier-e.multiplier}));function j(n){var e=n.betArray;return(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,o.jsx)(y,{children:b.map((function(n,t){var r=n.items,i=n.multiplier;return(0,o.jsxs)("div",{className:e.includes(i)?"":"hidden",children:[(0,o.jsxs)("div",{className:"multiplier",children:[i,"x"]}),(0,o.jsx)("div",{className:"icon",children:(0,o.jsx)("img",{className:"slotImage",src:r[0].image})},t)]},t)}))})})}function Z(){var n=(0,v.Z)(['\n  @keyframes spinning {\n    0% {\n      top: 0;\n    }\n    100% {\n      top: calc(var(--num-items) * -100%);\n    }\n  }\n\n  --num-items: 5;\n  --spin-speed: 0.6s;\n\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  transition: opacity 0.1s 0.1s ease;\n  animation: spinning var(--spin-speed) 0.1s linear infinite;\n  opacity: 0;\n\n  &[data-spinning="true"] {\n    opacity: 1;\n  }\n\n  & > div {\n    color: white;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    padding: 15px;\n  }\n']);return Z=function(){return n},n}var w=h.ZP.div(Z());function k(){var n=(0,v.Z)(["\n  0% {\n    transform: translateY(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0%);\n    opacity: 1;\n  }\n"]);return k=function(){return n},n}function A(){var n=(0,v.Z)(["\n  0%, 30% {\n    transform: scale(1)\n  }\n  10% {\n    transform: scale(1.3)\n  }\n"]);return A=function(){return n},n}function P(){var n=(0,v.Z)(["\n      animation: reveal-glow 1s;\n    "]);return P=function(){return n},n}function N(){var n=(0,v.Z)(["\n  width: 100px;\n  aspect-ratio: 1/1.5;\n  position: relative;\n  background: #4444ff11;\n  overflow: hidden;\n  border-radius: 10px;\n  border: 2px solid #2d2d57;\n  transition:\n    background 0.2s,\n    border 0.2s,\n    box-shadow 0.2s;\n  ","\n"]);return N=function(){return n},n}function S(){var n=(0,v.Z)(["\n      opacity: 1;\n      transform: translateY(0%);\n      animation: "," cubic-bezier(0.18, 0.89, 0.32, 1.28) 0.25s;\n    "]);return S=function(){return n},n}function z(){var n=(0,v.Z)(["\n      & > img {\n        animation: "," 2s 0.25s cubic-bezier(0.04, 1.14, 0.48, 1.63)\n          infinite;\n      }\n    "]);return z=function(){return n},n}function I(){var n=(0,v.Z)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  padding: 10px;\n  transition:\n    opacity 0.2s,\n    transform 0.3s ease;\n  transform: translateY(-100%);\n  opacity: 0;\n\n  ","\n\n  ","\n"]);return I=function(){return n},n}var M=(0,h.F4)(k()),C=(0,h.F4)(A()),F=h.ZP.div(N(),(function(n){return n.$good&&(0,h.iv)(P())})),X=h.ZP.div(I(),(function(n){return n.$revealed&&(0,h.iv)(S(),M)}),(function(n){return n.$good&&(0,h.iv)(z(),C)}));function Y(n){var e=n.revealed,t=n.good,r=n.item,i=n.index,a=g.useMemo((function(){return(0,c.Z)(l).sort((function(){return Math.random()-.5}))}),[]);return(0,o.jsxs)(F,{$good:t,children:[(0,o.jsx)(w,{"data-spinning":!e,children:a.map((function(n,e){return(0,o.jsx)("div",{children:(0,o.jsx)("img",{className:"slotImage",src:n.image})},e)}))}),r&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(X,{className:"revealedSlot",$revealed:e,$good:e&&t,children:(0,o.jsx)("img",{className:"slotImage",src:r.image,style:{animationDelay:.25*i+"s"}})})})]})}function E(){var n=(0,v.Z)(['\n  perspective: 100px;\n  user-select: none;\n\n  & > div {\n    display: grid;\n    gap: 20px;\n    transform: rotateX(3deg) rotateY(0deg);\n  }\n\n  @keyframes pulse {\n    0%,\n    30% {\n      transform: scale(1);\n    }\n    10% {\n      transform: scale(1.3);\n    }\n  }\n\n  @keyframes reveal-glow {\n    0%,\n    30% {\n      border-color: #2d2d57;\n      background: #ffffff00;\n    }\n    10% {\n      border-color: white;\n      background: #ffffff33;\n    }\n  }\n\n  @keyframes shine {\n    0%,\n    30% {\n      background: #ffffff00;\n    }\n    10% {\n      background: #ffffff33;\n    }\n  }\n\n  @keyframes result-flash {\n    25%,\n    75% {\n      background-color: #ffec63;\n      color: #333;\n    }\n    50% {\n      background-color: #ffec6311;\n      color: #ffec63;\n    }\n  }\n\n  .result {\n    border: none;\n    padding: 10px;\n    text-transform: uppercase;\n    position: relative;\n    padding: 10px;\n    width: 100%;\n    border-radius: 10px;\n    border-spacing: 10px;\n    border: 1px solid #ffec63;\n    background-color: #ffec6311;\n    color: #ffec63;\n    font-size: 14px;\n    font-weight: bold;\n    text-align: center;\n  }\n\n  .result[data-good="true"] {\n    animation: result-flash 5s infinite;\n  }\n\n  .slots {\n    display: flex;\n    gap: 20px;\n    justify-content: center;\n    box-sizing: border-box;\n    border-radius: 10px;\n  }\n\n  .slot::after {\n    content: "";\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 1;\n  }\n\n  @keyframes reveal {\n    0% {\n      transform: translateY(100%);\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0%);\n      opacity: 1;\n    }\n  }\n\n  .slotImage {\n    aspect-ratio: 1/1;\n    max-width: 100%;\n    max-height: 100%;\n  }\n']);return E=function(){return n},n}var T=h.ZP.div(E()),$=t(9531),_=t(4306),O=t(3495),L=function(n){var e=n.messages,t=(0,i.Z)(g.useState(0),2),r=t[0],a=t[1];return g.useEffect((function(){var n=setInterval((function(){a((function(n){return(n+1)%e.length}))}),2500);return function(){return clearTimeout(n)}}),[e]),(0,o.jsx)(o.Fragment,{children:e[r]})};function D(){var n=(0,$.dm)(),e=s.AX.useGame(),t=(0,s.zl)(),u=(0,i.Z)(g.useState(!1),2),d=u[0],p=u[1],m=(0,i.Z)(g.useState(),2),v=m[0],h=m[1],x=(0,i.Z)(g.useState(!1),2),y=x[0],b=x[1],Z=(0,i.Z)(g.useState(3),2),w=Z[0],k=Z[1],A=(0,i.Z)((0,s.re)(),2),P=A[0],N=A[1],S=(0,i.Z)(g.useState(Array.from({length:3}).map((function(){return l[0]}))),2),z=S[0],I=S[1],M=(0,O.h)(),C=(0,_.O)(),F=(0,s.cT)({win:"/games/slots/win.mp3",lose:"/games/slots/lose.mp3",reveal:"/games/slots/reveal.mp3",revealLegendary:"/games/slots/reveal-legendary.mp3",spin:"/games/slots/spin.mp3",play:"/games/slots/insert.mp3"}),X=g.useMemo((function(){return function(n,e){var t=function(){var n=r-o,e=l.filter((function(e){return e.multiplier<=Math.min(n,i)})),t=f(e);if(t&&(o+=t.multiplier,a[s]=t.multiplier),++s>1e3)return"break"},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=Math.min(r,n/e),a=Array.from({length:r}).fill(0),o=0;if(!i)return[];for(var s=0;o<r;){if("break"===t())break}return a}(t.maxPayout,P)}),[t.maxPayout,P,n.nonce]),E=X.some((function(n){return n>1})),D=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;F.play("reveal",{playbackRate:1.1});var t=n.slice(0,e+1).every((function(n,e,t){return!e||n===t[e-1]}));n[e].multiplier>=5&&t&&F.play("revealLegendary"),k(e+1),2===e&&(F.sounds.spin.player.stop(),setTimeout((function(){p(!1),t?(b(!0),F.play("win")):F.play("lose")}),500)),e<2&&setTimeout((function(){return D(n,e+1)}),500)},G=function(){var t=(0,r.Z)((function(){var t,r,i,o,s,u;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),p(!0),h(void 0),[4,e.play({wager:P,bet:X})];case 1:return a.sent(),F.play("play"),k(0),b(!1),t=Date.now(),F.play("spin",{playbackRate:.5}),[4,n.result()];case 2:return r=a.sent(),i=Date.now()-t,o=Math.max(0,1e3-i),s=function(n,e,t){if(e>0){var r,i=l.filter((function(n){return n.multiplier===e})),a=null!==(r=f(i))&&void 0!==r?r:f(l.filter((function(n){return n.multiplier<1})));return new Array(n).fill(a)}var o=l.filter((function(n){return t.includes(n.multiplier)})),s=Array.from({length:n}).reduce((function(e,t,r){var i=e.previous,a=e.items,s=function(){var e;return r===n-1?null!==(e=f(o.filter((function(n){return!a.includes(n)}))))&&void 0!==e?e:f(l):Math.random()<.75?i:f(o)}();return{previous:s,items:(0,c.Z)(a).concat([s])}}),{previous:f(o),items:[]}).items;return s}(3,r.multiplier,X),I(s),h(r),setTimeout((function(){return D(s)}),o),[3,4];case 3:throw u=a.sent(),p(!1),k(3),u;case 4:return[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.AX.Portal,{target:"screen",children:[y&&(0,o.jsx)(s.e6,{src:z[0].image}),(0,o.jsx)(s.AX.Responsive,{children:(0,o.jsx)(T,{children:(0,o.jsxs)("div",{children:[(0,o.jsx)(j,{betArray:X}),(0,o.jsx)("div",{className:"slots",children:z.map((function(n,e){return(0,o.jsx)(Y,{index:e,revealed:w>e,item:n,good:y},e)}))}),(0,o.jsx)("div",{className:"result","data-good":y,children:d?(0,o.jsx)(L,{messages:["Spinning!","Good luck"]}):v?(0,o.jsxs)(o.Fragment,{children:["Payout:"," ",(0,o.jsx)(s.WA,{mint:v.token,amount:v.payout})]}):E?(0,o.jsx)(L,{messages:["SPIN ME!","FEELING LUCKY?"]}):(0,o.jsx)(o.Fragment,{children:"\u274c Choose a lower wager!"})})]})})})]}),(0,o.jsxs)(s.AX.Portal,{target:"controls",children:[(0,o.jsx)(s.AX.WagerInput,{value:P,onChange:N}),C.connected?(0,o.jsx)(s.AX.PlayButton,{disabled:!E,onClick:G,children:"Spin"}):(0,o.jsx)(s.AX.Button,{main:!0,onClick:function(){C.wallet?C.connect():M.setVisible(!0)},children:"Spin"})]})]})}},7568:function(n,e,t){function r(n,e,t,r,i,a,o){try{var s=n[a](o),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(n){return function(){var e=this,t=arguments;return new Promise((function(i,a){var o=n.apply(e,t);function s(n){r(o,i,a,s,u,"next",n)}function u(n){r(o,i,a,s,u,"throw",n)}s(void 0)}))}}t.d(e,{Z:function(){return i}})},253:function(n,e,t){t.d(e,{Z:function(){return s}});var r=t(9474),i=t(3375),a=t(3128),o=t(1566);function s(n,e){return(0,r.Z)(n)||(0,i.Z)(n,e)||(0,o.Z)(n,e)||(0,a.Z)()}},7297:function(n,e,t){function r(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}t.d(e,{Z:function(){return r}})},9815:function(n,e,t){t.d(e,{Z:function(){return o}});var r=t(943);var i=t(3375);var a=t(1566);function o(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||(0,i.Z)(n)||(0,a.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);