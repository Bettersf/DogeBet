"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{2043:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(7568),a=r(253),s=r(7582),i=r(5893),c=r(7294),o=r(3840),l=r(5769),u=r(8122),h="/games/flip/Coin.glb",p="/games/flip/heads.png",d="/games/flip/tails.png";function f(){var e=(0,o.L)(h).nodes,t=(0,a.Z)((0,l.m)([p,d]),2),r=t[0],n=t[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("primitive",{object:e.Coin}),(0,i.jsxs)("mesh",{"position-z":.3,children:[(0,i.jsx)("planeGeometry",{args:[1.3,1.3]}),(0,i.jsx)("meshStandardMaterial",{transparent:!0,map:r})]}),(0,i.jsx)("group",{"rotation-y":Math.PI,children:(0,i.jsxs)("mesh",{"position-z":.3,children:[(0,i.jsx)("planeGeometry",{args:[1.3,1.3]}),(0,i.jsx)("meshStandardMaterial",{transparent:!0,map:n})]})})]})}function x(e){var t=e.flipping,r=e.result,n=(0,c.useRef)(null),a=(0,c.useRef)(0);return(0,c.useEffect)((function(){if(!t&&n.current){var e=Math.floor(n.current.rotation.y/(2*Math.PI));a.current=(e+1)*Math.PI*2+r*Math.PI}}),[t,r]),(0,u.C)((function(e,r){if(n.current){if(t)n.current.rotation.y+=25*r;else{n.current.rotation.y+=(i=10*(a.current-n.current.rotation.y)*r,c=0,o=1,Math.min(Math.max(i,c),o))}var s=t?1.25:1;n.current.scale.y+=.1*(s-n.current.scale.y),n.current.scale.setScalar(n.current.scale.y)}var i,c,o})),(0,i.jsx)("group",{ref:n,children:(0,i.jsx)(f,{})})}o.L.preload(h);var m=r(1355),j=r(7188),g=new(r(9477).Object3D),y=function(e){var t=e.color,r=(0,l.m)("/games/flip/star.png"),n=c.useRef(null),a=c.useRef(0);return(0,u.C)((function(){for(var e=0;e<10;e++){var t=e/10*Math.PI*2,r=.5+2*(1+Math.cos(e));g.rotation.z=e+.001*Date.now(),g.scale.setScalar(r*a.current*1*(1-a.current));var s=1+2*a.current;g.position.set(Math.cos(t)*s,Math.sin(t)*s,0),g.updateMatrix(),n.current.setMatrixAt(e,g.matrix)}n.current.instanceMatrix.needsUpdate=!0,a.current+=.1*(1-a.current)})),(0,i.jsxs)("instancedMesh",{ref:n,args:[void 0,void 0,10],"position-z":-1,children:[(0,i.jsx)("planeGeometry",{}),(0,i.jsx)("meshBasicMaterial",{transparent:!0,map:r,color:t})]})},v=r(9531),M=r(4306),C=r(3495),w={heads:[2,0],tails:[0,2]};var b=function(){var e=m.AX.useGame(),t=(0,m.kx)(),r=(0,v.dm)(),o=(0,a.Z)(c.useState(!1),2),l=o[0],u=o[1],h=(0,a.Z)(c.useState(!1),2),f=h[0],g=h[1],b=(0,a.Z)(c.useState(0),2),S=b[0],k=b[1],P=(0,a.Z)(c.useState("heads"),2),A=P[0],X=P[1],z=(0,C.h)(),I=(0,M.O)(),Z=[1,5,10,50,100].map((function(e){return e*t.baseWager})),_=(0,a.Z)(c.useState(Z[0]),2),L=_[0],R=_[1],B=(0,m.cT)({coin:"/games/flip/coin.mp3",win:"/games/flip/win.mp3",lose:"/games/flip/lose.mp3"}),G=function(){var t=(0,n.Z)((function(){var t,n;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,,3,4]),g(!1),u(!0),B.play("coin",{playbackRate:.5}),[4,e.play({bet:w[A],wager:L,metadata:[A]})];case 1:return a.sent(),B.play("coin"),[4,r.result()];case 2:return t=a.sent(),n=t.payout>0,k(t.resultIndex),g(n),n?B.play("win"):B.play("lose"),[3,4];case 3:return u(!1),[7];case 4:return[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.AX.Portal,{target:"screen",children:(0,i.jsxs)(j.Xz,{linear:!0,flat:!0,orthographic:!0,camera:{zoom:80,position:[0,0,100]},children:[(0,i.jsx)(c.Suspense,{fallback:null,children:(0,i.jsx)(x,{result:S,flipping:l})}),(0,i.jsx)(y,{color:"white"}),l&&(0,i.jsx)(y,{color:"white"}),f&&(0,i.jsx)(y,{color:"#42ff78"}),(0,i.jsx)("ambientLight",{intensity:3}),(0,i.jsx)("directionalLight",{"position-z":1,"position-y":1,castShadow:!0,color:"#CCCCCC"}),(0,i.jsx)("hemisphereLight",{intensity:.5,position:[0,1,0],scale:[1,1,1],color:"#ffadad",groundColor:"#6666fe"})]})}),(0,i.jsxs)(m.AX.Portal,{target:"controls",children:[(0,i.jsx)(m.AX.Button,{disabled:r.isPlaying,onClick:function(){return X("heads"===A?"tails":"heads")},children:(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)("img",{width:32,src:"heads"===A?p:d}),(0,i.jsx)("div",{className:"flex justify-center items-center",children:"heads"===A?"Heads":"Tails"})]})}),(0,i.jsx)(m.AX.WagerInput,{value:L,onChange:R}),I.connected?(0,i.jsx)(m.AX.PlayButton,{onClick:G,children:"Flip"}):(0,i.jsx)(m.AX.Button,{main:!0,onClick:function(){I.wallet?I.connect():z.setVisible(!0)},children:"Play"})]})]})}}}]);