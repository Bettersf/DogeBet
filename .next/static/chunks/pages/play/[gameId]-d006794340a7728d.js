(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{2975:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/play/[gameId]",function(){return n(2645)}])},2645:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),s=n(9815),a=n(1355),i=n(7294),l=n(7306),c=n(9531),o=n(7547),u=n(7289),d=n(5186),x=n(9081),m=n(7568),f=n(7582);function h(e){var t=(0,c.dm)(),n=(0,i.useContext)(a.lO),s=(0,c.$I)(),l=(0,c.pQ)(),o=function(){var e=(0,m.Z)((function(){return(0,f.__generator)(this,(function(e){return l(s.methods.playerInitialize().accounts({}).instruction()),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(x.u,{onClose:function(){return e.onClose()},children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Provably Fair"}),!t.userCreated&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Provably Fair allows you to verify that the result of each game was randomly generated. Since you are playing from this wallet for the first time, you can request the initial hashed seed ahead of time. After this it will be done automatically for each play."}),(0,r.jsx)(a.AX.Button,{main:!0,onClick:o,children:"Get hashed seed"})]}),t.userCreated&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Your client seed will affect the result of the next game you play."}),(0,r.jsxs)("div",{style:{display:"grid",gap:"10px",width:"100%",padding:"20px"},children:[(0,r.jsx)("div",{children:"Next RNG Seed (sha256)"}),(0,r.jsx)(a.AX.TextInput,{value:t.nextRngSeedHashed||"",disabled:!0}),(0,r.jsx)("div",{children:"Client Seed"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",width:"100%"},children:[(0,r.jsx)(a.AX.TextInput,{style:{flexGrow:"1"},value:n.clientSeed,disabled:t.isPlaying,maxLength:32,onChange:n.setClientSeed}),(0,r.jsx)(a.AX.Button,{disabled:t.isPlaying,onClick:function(){return n.setClientSeed(String(1e9*Math.random()|0))},children:(0,r.jsx)(d.J.Shuffle,{})})]})]})]})]})}var g=n(8862),j=function(e){var t=e.currentStep;return(0,r.jsx)("div",{className:"flex justify-center",children:["Signing","Sending","Settling"].map((function(e,n){return(0,r.jsx)("div",{className:"w-full h-2 rounded-md mx-1 flex items-center justify-center transition-all duration-300 \n          ".concat(n<t?"bg-purple-500":"","\n          ").concat(n===t?"bg-purple-700 animate-purplePulse":"","\n          ").concat(n>t?"bg-gray-300":"","\n          ")},e)}))})};function p(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"grid grid-cols-2 md:flex md:flex-wrap md:justify-center",children:o.W.map((function(e){return(0,r.jsx)("div",{className:"w-48 md:w-64 p-2 flex justify-center md:my-2",children:(0,r.jsx)(u.y,{game:e})},e.id)}))})})}function v(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.AX.Portal,{target:"error",children:(0,r.jsxs)(a.AX.Responsive,{children:[(0,r.jsx)("h1",{children:"\ud83d\ude2d Oh no!"}),(0,r.jsx)("p",{children:"Something went wrong"})]})})})}function y(){var e=a.AX.useGame().game,t=(0,i.useState)(!1),n=t[0],o=t[1],u=(0,i.useState)(!1),m=u[0],f=u[1],p=(0,a.Sn)(),v="/games/".concat(e.id,"/logo.png"),y=(0,g.L)(),w=y.newcomer,b=y.gamesPlayed,N=y.set,C=function(){var e=(0,c.GJ)(),t=(0,c.mA)((0,l.EK)(e),l.ho),n=(0,c.YO)();return i.useMemo((function(){return"play"!==n.label?-1:(null===t||void 0===t?void 0:t.status.resultRequested)?2:"processing"===n.state||"sending"===n.state?1:"simulating"===n.state||"signing"===n.state?0:-1}),[n,t])}();return(0,i.useEffect)((function(){!w&&b.includes(e.id)||(o(!0),N((function(t){return{newcomer:!1,gamesPlayed:(0,s.Z)(t.gamesPlayed).concat([e.id])}})))}),[e.id,b,w,N]),(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsxs)(x.u,{onClose:function(){return o(!1)},children:[(0,r.jsx)("img",{height:"150px",src:v,alt:"Splash for ".concat(e.meta.name)}),(0,r.jsx)("h1",{children:e.meta.name}),(0,r.jsx)("p",{children:e.meta.description})]}),m&&(0,r.jsx)(h,{onClose:function(){return f(!1)}}),(0,r.jsxs)("div",{className:"w-full relative grid gap-1",children:[(0,r.jsxs)("div",{className:"relative flex-grow bg-[#0c0c11] rounded-lg overflow-hidden transition-height duration-200 md:min-h-[550px] min-h-[500px]",children:[(0,r.jsx)(a.AX.PortalTarget,{target:"error"}),(0,r.jsx)(a.AX.PortalTarget,{target:"screen"}),(0,r.jsx)("div",{className:"absolute left-0 bottom-0 p-1 flex gap-2",children:(0,r.jsxs)("button",{onClick:function(){return p.set((p.masterGain+.25)%1.25)},children:["Volume: ",100*p.masterGain,"%"]})})]}),(0,r.jsx)(j,{currentStep:C}),(0,r.jsxs)("div",{className:"w-full bg-[#1A1B28] p-2 sm:p-5 text-white rounded-lg flex flex-wrap gap-2 sm:gap-5 items-start sm:flex-row",children:[(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsx)("button",{className:"p-2 text-white bg-transparent hover:bg-[#ffffff22] rounded-lg cursor-pointer focus:outline-none",onClick:function(){return o(!0)},children:(0,r.jsx)(d.J.Info,{})}),(0,r.jsx)("button",{className:"p-2 text-white bg-transparent hover:bg-[#ffffff22] rounded-lg cursor-pointer focus:outline-none",onClick:function(){return f(!0)},children:(0,r.jsx)(d.J.Fairness,{})})]}),(0,r.jsxs)("div",{className:"flex-grow flex items-center justify-start gap-2",children:[(0,r.jsx)(a.AX.PortalTarget,{target:"controls"}),(0,r.jsx)(a.AX.PortalTarget,{target:"play"})]})]})]})]})}var w=n(7513),b=n(1163),N=function(e){var t=e.gameId,n=o.W.find((function(e){return e.id===t}));return(0,r.jsxs)(r.Fragment,{children:[n?(0,r.jsx)("div",{className:"flex flex-col justify-center items-center mx-auto max-w-6xl max-sm:max-w-sm pt-20",children:(0,r.jsx)(a.AX.Game,{game:n,errorFallback:(0,r.jsx)(v,{}),children:(0,r.jsx)(y,{})})}):(0,r.jsx)("div",{className:"bg-black animate-pulse mt-20 flex flex-col justify-center items-center mx-auto max-w-5xl px-10 py-20 rounded-lg shadow-xl",children:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center max-w-lg rounded-lg",children:[(0,r.jsx)("video",{src:"/gamba.mp4",className:"w-full h-full",autoPlay:!0,muted:!0,playsInline:!0,loop:!0}),(0,r.jsx)("p",{className:"text-2xl text-white mt-5",children:"Loading or Invalid game ID..."})]})}),(0,r.jsx)("div",{className:"flex flex-col justify-center items-center mx-auto max-w-6xl max-sm:max-w-sm mb-4",children:(0,r.jsx)("div",{className:"py-4",children:(0,r.jsx)(p,{})})})]})},C=function(){var e=(0,b.useRouter)(),t=e.query.gameId,n=(0,i.useState)(t),s=(n[0],n[1]),a=(0,i.useState)(!0),l=a[0],c=a[1];return(0,i.useEffect)((function(){var n=function(){c(!0)},r=function(){c(!1),s(t)};return e.events.on("routeChangeStart",n),e.events.on("routeChangeComplete",r),t&&(c(!1),s(t)),function(){e.events.off("routeChangeStart",n),e.events.off("routeChangeComplete",r)}}),[t,e.events]),(0,r.jsx)(r.Fragment,{children:l?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(N,{gameId:t},t)]})})}}},function(e){e.O(0,[189,774,888,179],(function(){return t=2975,e(e.s=t);var t}));var t=e.O();_N_E=t}]);